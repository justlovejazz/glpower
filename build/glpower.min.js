window.GLP=function(t){var e={};function i(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){"use strict";i.r(e);var n,r=function(){function t(t){this.exts={},this.gl=t}return t.prototype.enableExtension=function(t){var e=this.gl.getExtension(t);e?this.exts[t]=e:console.warn(t+" not supported.")},t.prototype.getExt=function(t){var e=this.exts[t];if(e)return e;console.warn(t+" not enabled")},t}(),o=function(){function t(t,e,i){this.x=t||0,this.y=e||0}return Object.defineProperty(t.prototype,"isVec2",{get:function(){return!0},enumerable:!0,configurable:!0}),t.prototype.set=function(t,e){return this.x=t,this.y=e,this},t.prototype.add=function(t){return t.isVec2?(this.x+=t.x,this.y+=t.y):"number"==typeof t&&(this.x+=t,this.y+=t),this},t.prototype.sub=function(t){return t.isVec2?(this.x-=t.x,this.y-=t.y):"number"==typeof t&&(this.x-=t,this.y-=t),this},t.prototype.multiply=function(t){return this.x*=t.x|t,this.y*=t.y|t,this},t.prototype.divide=function(t){return this.x/=t.x|t,this.y/=t.y|t,this},t.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this},t.prototype.clone=function(){return new t(this.x,this.y)},t}(),s=function(){function t(t){this.objectCnt=0,this.activeAttrs=[],this.textureCnt=0,console.log("%c GLパワーを見せつけろ","padding: 5px 10px; background-color: black; color: white;font-size:8px;"),this.initContext(t.canvas),this.isRetina=t.retina||!1}return t.prototype.initContext=function(t){this._canvas=t,this.gl=this._canvas.getContext("webgl"),this.gl.enable(this.gl.DEPTH_TEST),this.gl.enable(this.gl.BLEND),this.ext=new r(this.gl),this.ext.enableExtension("OES_texture_float_linear"),this.ext.enableExtension("OES_texture_half_float_linear"),this.ext.enableExtension("WEBGL_color_buffer_float"),this.ext.enableExtension("OES_texture_float"),this.ext.enableExtension("OES_texture_half_float"),this.ext.enableExtension("ANGLE_instanced_arrays")},t.prototype.setSize=function(t,e){this._canvas.width=t*(this.isRetina?window.devicePixelRatio:1),this._canvas.height=e*(this.isRetina?window.devicePixelRatio:1)},t.prototype.getSize=function(){return new o(this._canvas.width,this._canvas.height)},t.prototype.cPrg=function(t){var e=t.material,i=this.gl.createProgram(),n=this.cShader(e.vert,this.gl.VERTEX_SHADER),r=this.cShader(e.frag,this.gl.FRAGMENT_SHADER);this.gl.attachShader(i,n),this.gl.attachShader(i,r),this.gl.linkProgram(i),this.gl.getProgramParameter(i,this.gl.LINK_STATUS)?t.material.programs[t.id]=i:console.error(this.gl.getProgramInfoLog(i))},t.prototype.cShader=function(t,e){var i=this.gl.createShader(e);if(this.gl.shaderSource(i,t),this.gl.compileShader(i),this.gl.getShaderParameter(i,this.gl.COMPILE_STATUS))return i;console.error(this.gl.getShaderInfoLog(i))},t.prototype.cAttr=function(t){for(var e=t.geometry,i=t.material.programs[t.id],n=Object.keys(e.attributes),r=0;r<n.length;r++){var o=n[r],s=e.attributes[o];s.location=this.gl.getAttribLocation(i,o),s.vbo=this.cVBO(s,"index"==o)}},t.prototype.cVBO=function(t,e){void 0===e&&(e=!1);var i=e?this.gl.ELEMENT_ARRAY_BUFFER:this.gl.ARRAY_BUFFER,n=e?new Int16Array(t.vert):new Float32Array(t.vert),r=this.gl.createBuffer();return this.gl.bindBuffer(i,r),this.gl.bufferData(i,n,this.gl.STATIC_DRAW),this.gl.bindBuffer(i,null),r},t.prototype.setAttr=function(t,e){for(var i=Object.keys(t.attributes),n=0;n<i.length;n++){var r=i[n],o=t.attributes[r];"index"==r?this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,o.vbo):-1!==o.location&&(this.activeAttrs.push(o.location),this.gl.enableVertexAttribArray(o.location),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,o.vbo),this.gl.vertexAttribPointer(o.location,o.stride,this.gl.FLOAT,!1,0,0),!0===o.instancing&&this.ext.getExt("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(o.location,o.divisor))}},t.prototype.resetAttr=function(t,e){for(var i=Object.keys(t.attributes),n=0;n<i.length;n++){var r=i[n],o=t.attributes[r];-1!==o.location&&!0===o.instancing&&this.ext.getExt("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(o.location,0)}},t.prototype.clearAttr=function(){for(var t=this.activeAttrs.length-1;t>=0;t--)this.gl.disableVertexAttribArray(this.activeAttrs[t]),this.activeAttrs.pop()},t.prototype.cUni=function(t,e){if(e)for(var i=Object.keys(e),n=0;n<i.length;n++){var r=i[n];e[r].location=this.gl.getUniformLocation(t,r.toString())}},t.prototype.setUni=function(t){if(t)for(var e=Object.keys(t),i=0;i<e.length;i++){var n=t[e[i]];n.location&&this.setUniform(n.location,n.value)}},t.prototype.setUniform=function(t,e){if(null!=e){var i,n="uniform";if(i=e,"number"==typeof e)n+="1f";else if("isVec2"in e)n+="2fv";else if("isVec3"in e)n+="3fv";else if("isMat4"in e)n+="Matrix4fv",i=e.elm;else if("isTexture"in e||"isFrameBuffer"in e){var r=void 0;"isFrameBuffer"in e?r=e.tex:1==(r=e).needUpdate&&(this.cTex(r),r.needUpdate=!1),r.unitID=this.textureCnt,this.gl.activeTexture(this.gl.TEXTURE0+this.textureCnt++),this.gl.bindTexture(this.gl.TEXTURE_2D,r.glTex),i=r.unitID,n+="1i"}n&&("uniformMatrix4fv"==n?this.gl[n](t,!1,i):this.gl[n](t,i))}},t.prototype.cTex=function(t){var e=this.gl.createTexture();this.gl.bindTexture(this.gl.TEXTURE_2D,e),null!=t.image?(this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.gl.RGBA,t.texType||this.gl.UNSIGNED_BYTE,t.image),this.gl.generateMipmap(this.gl.TEXTURE_2D)):this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,t.width,t.height,0,this.gl.RGBA,t.texType||this.gl.UNSIGNED_BYTE,null),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,t.minFilter||this.gl.NEAREST),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,t.magFilter||this.gl.NEAREST),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,t.wrapS||this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,t.wrapT||this.gl.CLAMP_TO_EDGE),this.gl.bindTexture(this.gl.TEXTURE_2D,null),t.glTex=e},t.prototype.renderObject=function(t,e){var i=t.material,n=t.geometry;null==t.id&&(t.id=this.objectCnt++),i&&n&&(t.updateMatrix(),t.modelViewMatrix.copy(e.modelMatrixInverse.clone().multiply(t.modelMatrix)),t.IndividualUniforms.projectionMatrix.value=e.projectionMatrix,t.material.programs[t.id]?this.gl.useProgram(t.material.programs[t.id]):(this.cPrg(t),this.gl.useProgram(t.material.programs[t.id]),this.cAttr(t),this.cUni(t.material.programs[t.id],i.uniforms),this.cUni(t.material.programs[t.id],t.IndividualUniforms)),i.culling?(this.gl.enable(this.gl.CULL_FACE),this.gl.frontFace(i.culling)):this.gl.disable(this.gl.CULL_FACE),i.depthTest?(this.gl.enable(this.gl.DEPTH_TEST),this.gl.depthFunc(i.depthFunc||this.gl.LEQUAL)):this.gl.disable(this.gl.DEPTH_TEST),this.gl.blendFunc(i.blendSrc||this.gl.SRC_ALPHA,i.blendDst||this.gl.ONE_MINUS_SRC_ALPHA),this.setUni(i.uniforms),this.setUni(t.IndividualUniforms),this.clearAttr(),this.setAttr(n,t),n.instancing?this.ext.getExt("ANGLE_instanced_arrays").drawElementsInstancedANGLE(null!=t.drawType?t.drawType:this.gl.TRIANGLES,n.attributes.index.vert.length,this.gl.UNSIGNED_SHORT,0,n.instancingCnt):this.gl.drawElements(null!=t.drawType?t.drawType:this.gl.TRIANGLES,n.attributes.index.vert.length,this.gl.UNSIGNED_SHORT,0),this.resetAttr(n,t))},t.prototype.setFrameBuffer=function(t){this.renderTarget=t,t&&!t.buffer&&this.cFBuffer(t),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,t?t.buffer:null)},t.prototype.cFBuffer=function(t){var e=this.gl.createFramebuffer();this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,e);var i=this.gl.createRenderbuffer();this.gl.bindRenderbuffer(this.gl.RENDERBUFFER,i),this.gl.renderbufferStorage(this.gl.RENDERBUFFER,this.gl.DEPTH_COMPONENT16,t.tex.width,t.tex.height),this.gl.framebufferRenderbuffer(this.gl.FRAMEBUFFER,this.gl.DEPTH_ATTACHMENT,this.gl.RENDERBUFFER,i),null==t.tex.glTex&&this.cTex(t.tex),this.gl.framebufferTexture2D(this.gl.FRAMEBUFFER,this.gl.COLOR_ATTACHMENT0,this.gl.TEXTURE_2D,t.tex.glTex,0),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null),this.gl.bindRenderbuffer(this.gl.RENDERBUFFER,null),t.buffer=e,t.tex.needUpdate=!1},t.prototype.renderRecursive=function(t,e){if(t.visible){t.isPowerObj&&this.renderObject(t,e);for(var i=0;i<t.children.length;i++)this.renderRecursive(t.children[i],e)}},t.prototype.render=function(t,e){e.updateMatrix(),this.textureCnt=0,this.gl.clearColor(0,0,0,1),this.gl.clearDepth(1),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT),this.renderTarget?this.gl.viewport(0,0,this.renderTarget.tex.width,this.renderTarget.tex.height):this.gl.viewport(0,0,this.gl.canvas.width,this.gl.canvas.height),this.renderRecursive(t,e),this.gl.flush()},t}(),h=function(){function t(t){this.id=0,this.needUpdate=!0,t=t||{},this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.magFilter,this.width=t.width||0,this.height=t.height||0,this.texType=t.texType}return t.prototype.loadImg=function(t,e){var i=this,n=new Image;return n.src=t,n.onload=function(){i.image=n,i.width=n.width,i.height=n.height,i.needUpdate=!0,e&&e(i)},this},Object.defineProperty(t.prototype,"isTexture",{get:function(){return!0},enumerable:!0,configurable:!0}),t}(),a=function(){function t(t){this.tex=new h(t)}return Object.defineProperty(t.prototype,"isFrameBuffer",{get:function(){return!0},enumerable:!0,configurable:!0}),t}(),u=function(t){this.needUpdate=!0,this.uniforms=t.uniforms,this.frag=t.frag,this.vert=t.vert,this.culling=t.culling,this.depthTest=void 0===t.depthTest||t.depthTest,this.depthFunc=t.depthFunc,this.blendSrc=t.blendSrc,this.blendDst=t.blendSrc,this.programs={}},c=function(){function t(t,e,i){this.x=t||0,this.y=e||0,this.z=i||0}return Object.defineProperty(t.prototype,"isVec3",{get:function(){return!0},enumerable:!0,configurable:!0}),t.prototype.set=function(t,e,i){return this.x=t,this.y=e,this.z=i,this},t.prototype.add=function(t){return t.isVec3?(this.x+=t.x,this.y+=t.y,this.z+=t.z):"number"==typeof t&&(this.x+=t,this.y+=t,this.z+=t),this},t.prototype.sub=function(t){return t.isVec3?(this.x-=t.x,this.y-=t.y,this.z-=t.z):"number"==typeof t&&(this.x-=t,this.y-=t,this.z-=t),this},t.prototype.multiply=function(t){return this.x*=t,this.y*=t,this.z*=t,this},t.prototype.divide=function(t){return this.x/=t,this.y/=t,this.z/=t,this},t.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},t.prototype.normalize=function(){return this.divide(this.length()||1)},t.prototype.cross=function(t){var e=this.x,i=this.y,n=this.z,r=t.x,o=t.y,s=t.z;return this.x=i*s-n*o,this.y=n*r-e*s,this.z=e*o-i*r,this},t.prototype.dot=function(t){return this.x*t.x+this.y*t.y+this.z*t.z},t.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this.z=t.z||0,this},t.prototype.clone=function(){return new t(this.x,this.y,this.z)},t}(),l=function(){function t(){this.identity()}return Object.defineProperty(t.prototype,"isMat4",{get:function(){return!0},enumerable:!0,configurable:!0}),t.prototype.identity=function(){return this.elm=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],this},t.prototype.clone=function(){return(new t).copy(this)},t.prototype.copy=function(t){return this.elm=t.elm.slice(),this},t.prototype.perspective=function(t,e,i,n){var r=1/Math.tan(t*Math.PI/360),o=n-i;return this.elm=[r/e,0,0,0,0,r,0,0,0,0,-(n+i)/o,-1,0,0,-n*i*2/o,0],this},t.prototype.lookAt=function(t,e,i){var n=t.clone().sub(e).normalize(),r=i.clone().cross(n).normalize(),o=n.clone().cross(r).normalize();return this.elm=[r.x,o.x,n.x,0,r.y,o.y,n.y,0,r.z,o.z,n.z,0,-t.dot(r),-t.dot(o),-t.dot(n),1],this},t.prototype.inverse=function(){var t=this.elm[0],e=this.elm[1],i=this.elm[2],n=this.elm[3],r=this.elm[4],o=this.elm[5],s=this.elm[6],h=this.elm[7],a=this.elm[8],u=this.elm[9],c=this.elm[10],l=this.elm[11],p=this.elm[12],f=this.elm[13],d=this.elm[14],g=this.elm[15],y=t*o-e*r,v=t*s-i*r,m=t*h-n*r,x=e*s-i*o,b=e*h-n*o,_=i*h-n*s,E=a*f-u*p,w=a*d-c*p,T=a*g-l*p,R=u*d-c*f,M=u*g-l*f,A=c*g-l*d,S=1/(y*A-v*M+m*R+x*T-b*w+_*E);return this.elm[0]=(o*A-s*M+h*R)*S,this.elm[1]=(-e*A+i*M-n*R)*S,this.elm[2]=(f*_-d*b+g*x)*S,this.elm[3]=(-u*_+c*b-l*x)*S,this.elm[4]=(-r*A+s*T-h*w)*S,this.elm[5]=(t*A-i*T+n*w)*S,this.elm[6]=(-p*_+d*m-g*v)*S,this.elm[7]=(a*_-c*m+l*v)*S,this.elm[8]=(r*M-o*T+h*E)*S,this.elm[9]=(-t*M+e*T-n*E)*S,this.elm[10]=(p*b-f*m+g*y)*S,this.elm[11]=(-a*b+u*m-l*y)*S,this.elm[12]=(-r*R+o*w-s*E)*S,this.elm[13]=(t*R-e*w+i*E)*S,this.elm[14]=(-p*x+f*v-d*y)*S,this.elm[15]=(a*x-u*v+c*y)*S,this},t.prototype.cTransform=function(t,e,i){this.identity(),this.matmul([1,0,0,0,0,1,0,0,0,0,1,0,t.x,t.y,t.z,1]);var n=Math.cos(e.x),r=Math.sin(e.x);return this.matmul([1,0,0,0,0,n,r,0,0,-r,n,0,0,0,0,1]),n=Math.cos(e.y),r=Math.sin(e.y),this.matmul([n,0,-r,0,0,1,0,0,r,0,n,0,0,0,0,1]),n=Math.cos(e.z),r=Math.sin(e.z),this.matmul([n,r,0,0,-r,n,0,0,0,0,1,0,0,0,0,1]),this.matmul([i.x,0,0,0,0,i.y,0,0,0,0,i.z,0,0,0,0,1]),this},t.prototype.matmul=function(t){for(var e=new Array(16),i=0;i<4;i++)for(var n=0;n<4;n++){for(var r=0,o=0;o<4;o++)r+=this.elm[4*o+n]*t[o+4*i];e[n+4*i]=r}this.elm=e},t.prototype.multiply=function(t){return this.matmul(t.elm),this},t.prototype.multiplyScaler=function(t){for(var e=0;e<this.elm.length;e++)this.elm[e]*=t;return this},t}(),p=function(){function t(){this.visible=!0,this.children=[],this.modelMatrix=new l,this.invModelMatrix=new l,this.modelViewMatrix=new l,this.position=new c,this.rotation=new c,this.scale=new c(1,1,1)}return t.prototype.add=function(t){this.children.push(t)},t.prototype.updateMatrix=function(){this.modelMatrix.cTransform(this.position,this.rotation,this.scale),this.invModelMatrix.copy(this.modelMatrix.clone().inverse())},t}(),f=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),d=function(t){function e(e,i,n,r){var o=t.call(this)||this;return o.fov=e,o.near=i,o.far=n,o.aspect=r,o.projectionMatrix=new l,o.modelMatrixInverse=new l,o}return f(e,t),e.prototype.updateMatrix=function(){t.prototype.updateMatrix.call(this),this.modelMatrixInverse.copy(this.modelMatrix.clone().inverse()),this.projectionMatrix.perspective(this.fov,this.aspect,this.near,this.far)},e}(p),g=function(){function t(){this.attributes={},this.vertCnt=0,this.instancing=!1}return t.prototype.add=function(t,e,i,n,r){this.attributes[t]={vert:e,stride:i,instancing:n,divisor:r||1},n?(this.instancing=!0,this.instancingCnt=e.length/i):"index"!=t&&(this.vertCnt=e.length/i)},t}(),y=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),v=function(t){function e(e,i,n){void 0===e&&(e=1),void 0===i&&(i=1),void 0===n&&(n=1);for(var r=t.call(this)||this,o=e/2,s=i/2,h=n/2,a=[-o,s,h,o,s,h,-o,-s,h,o,-s,h,o,s,-h,-o,s,-h,o,-s,-h,-o,-s,-h,o,s,h,o,s,-h,o,-s,h,o,-s,-h,-o,s,-h,-o,s,h,-o,-s,-h,-o,-s,h,o,s,-h,o,s,h,-o,s,-h,-o,s,h,-o,-s,-h,-o,-s,h,o,-s,-h,o,-s,h],u=[],c=[],l=0;l<6;l++){u.push(0,1,1,1,0,0,1,0);var p=4*l;c.push(0+p,2+p,1+p,1+p,2+p,3+p)}return r.add("position",a,3),r.add("normal",[0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0],3),r.add("uv",u,2),r.add("index",c,1),r}return y(e,t),e}(g),m=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),x=function(t){function e(e,i,n,r,o){void 0===e&&(e=.5),void 0===i&&(i=.5),void 0===n&&(n=1),void 0===r&&(r=10),void 0===o&&(o=1);for(var s=t.call(this)||this,h=[],a=[],u=[],l=[],p=0;p<=o+2;p++)for(var f=0;f<r;f++){var d=2*Math.PI/r*f;if(p<=o){var g=p/o,y=(1-g)*i+g*e,v=Math.cos(d)*y,m=-n/2+n/o*p,x=Math.sin(d)*y;h.push(v,m,x),u.push(f/r,p/o);var b=new c(Math.cos(d),0,Math.sin(d)).normalize();a.push(b.x,b.y,b.z),p<o&&l.push(p*r+f,(p+1)*r+(f+1)%r,p*r+(f+1)%r,p*r+f,(p+1)*r+f,(p+1)*r+(f+1)%r)}else{var _=p-o-1;y=_?e:i,v=Math.cos(d)*y,m=-n/2+n*_,x=Math.sin(d)*y;h.push(v,m,x),u.push(.5*(v+y)/y,.5*(x+y)/y),a.push(0,2*_-1,0);var E=r*(o+(_+1));f<=r-2&&(0==_?l.push(E,E+f,E+f+1):l.push(E,E+f+1,E+f))}}return s.add("position",h,3),s.add("normal",a,3),s.add("uv",u,2),s.add("index",l,1),s}return m(e,t),e}(g),b=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),_=function(t){function e(e,i,n,r){void 0===e&&(e=1),void 0===i&&(i=1),void 0===n&&(n=1),void 0===r&&(r=1);for(var o=t.call(this)||this,s=e/2,h=i/2,a=[],u=[],c=[],l=0;l<=r;l++)for(var p=0;p<=n;p++){var f=p/n,d=l/n;if(a.push(e*f-s,i*d-h,0),u.push(f,d),l>0&&p>0){var g=n+1,y=g*l+p,v=g*(l-1)+p-1;c.push(y,g*l+p-1,v,y,v,g*(l-1)+p)}}return o.add("position",a,3),o.add("normal",[],3),o.add("uv",u,2),o.add("index",c,1),o}return b(e,t),e}(g),E=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),w=function(t){function e(e,i,n){void 0===e&&(e=.5),void 0===i&&(i=20),void 0===n&&(n=10);for(var r=t.call(this)||this,o=[],s=[],h=[],a=[],u=0;u<=n;u++)for(var l=u/n*Math.PI,p=i,f=0;f<p;f++){var d=f/p*Math.PI*2,g=Math.sin(l)*e,y=Math.cos(d)*g,v=-Math.cos(l)*e,m=Math.sin(d)*g;o.push(y,v,m),h.push(f/p,u/n);var x=new c(y,v,m).normalize();s.push(x.x,x.y,x.z),a.push(u*i+f,(u+1)*i+(f+1)%i,u*i+(f+1)%i,u*i+f,(u+1)*i+f,(u+1)*i+(f+1)%i)}return r.add("position",o,3),r.add("normal",s,3),r.add("uv",h,2),r.add("index",a,1),r}return E(e,t),e}(g),T=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),R=function(t){function e(){return t.call(this)||this}return T(e,t),e}(p),M=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),A=function(t){function e(e,i,n){var r=t.call(this)||this;return r.geometry=e,r.material=i,r.drawType=n,r.IndividualUniforms={modelViewMatrix:{value:r.modelViewMatrix},invMatrix:{value:r.invModelMatrix},projectionMatrix:{value:null}},r}return M(e,t),Object.defineProperty(e.prototype,"isPowerObj",{get:function(){return!0},enumerable:!0,configurable:!0}),e}(p),S=function(){function t(){}return t.prototype.load=function(t,e){var i=this,n=new XMLHttpRequest;n.open("GET",t,!0),n.send(null),n.addEventListener("load",(function(t){for(var r=JSON.parse(n.response),o=r.buffers[0].uri,s=i.decodeURI(o),h={},a=Object.keys(r.nodes),u=0;u<a.length;u++){var c=r.nodes[a[u]],l=r.meshes[c.mesh].primitives[0],p={},f=Object.keys(l.attributes);f.push("indices");for(var d=0;d<f.length;d++){var g=l.attributes[f[d]];"indices"==f[d]&&(g=l.indices);var y=r.accessors[g],v=r.bufferViews[y.bufferView],m=0;switch(y.type){case"SCALAR":m=1;break;case"VEC2":m=2;break;case"VEC3":m=3}var x=void 0;switch(y.componentType){case 5126:x=Float32Array;break;case 5123:x=Int16Array}p[f[d].toLocaleLowerCase()]={size:m,array:new x(s,v.byteOffset,y.count*m)}}h[c.name]=p}e&&e(h)}))},t.prototype.decodeURI=function(t){for(var e=t.match(/^data:(.*?)(;base64)?,(.*)$/),i=atob(e[3]),n=new Uint8Array(i.length),r=0;r<i.length;r++)n[r]=i.charCodeAt(r);return n.buffer},t}(),O=function(){function t(){this.attenuation=.9,this._position=new o(NaN,NaN),this._delta=new o(NaN,NaN);var t=navigator.userAgent;t.indexOf("iPhone")>=0||t.indexOf("iPad")>=0||t.indexOf("Android")>=0||"iPad"==navigator.platform||"MacIntel"==navigator.platform&&-1!=navigator.userAgent.indexOf("Safari")&&-1==navigator.userAgent.indexOf("Chrome")&&void 0!==navigator.standalone?(window.addEventListener("touchstart",this._MouseEvent.bind(this,"start")),window.addEventListener("touchmove",this._MouseEvent.bind(this,"move"),{passive:!1}),window.addEventListener("touchend",this._MouseEvent.bind(this,"end"))):(window.addEventListener("mousedown",this._MouseEvent.bind(this,"start")),window.addEventListener("mousemove",this._MouseEvent.bind(this,"move")),window.addEventListener("mouseup",this._MouseEvent.bind(this,"end")),window.addEventListener("dragend",this._MouseEvent.bind(this,"end")),window.addEventListener("wheel",this.wheel.bind(this),{passive:!1})),this._position.set(NaN,NaN),this._touchDown=!1}return Object.defineProperty(t.prototype,"position",{get:function(){return this._position.clone()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"delta",{get:function(){return this._delta.clone()},enumerable:!0,configurable:!0}),t.prototype.getNormalizePosition=function(t){if(this._position.x!=this._position.x)return new o(NaN,NaN);var e=this._position.clone().divide(t).multiply(2).sub(1);return e.y*=-1,e},t.prototype.getRelativePosition=function(t,e){var i=t.getClientRects()[0],n=(void 0).x-i.left,r=(void 0).y-i.top;return e&&(n/=i.width,r/=i.height),new o(n,r)},t.prototype.setPos=function(t,e){this._position.x!=this._position.x||this._position.y!=this._position.y?this._delta.set(0,0):this._delta.set(t-this._position.x,e-this._position.y),this._position.set(t,e)},t.prototype._MouseEvent=function(t,e){var i,n;"touches"in e?e.touches.length>0&&(i=e.touches[0].clientX,n=e.touches[0].clientY):0==e.button&&(i=e.pageX-window.pageXOffset,n=e.pageY-window.pageYOffset),"start"==t?(this._touchDown=!0,this.setPos(i,n),this.onTouchStart&&this.onTouchStart(e)):"move"==t?(this.setPos(i,n),this._touchDown&&this.onTouchMove&&this.onTouchMove(e)):"end"==t&&(this._touchDown=!1,this.onTouchEnd&&this.onTouchEnd(e))},t.prototype.wheel=function(t){this.onWheel&&this.onWheel(t)},t.prototype.update=function(){this._delta.multiply(this.attenuation),this.onHover&&!this.isSP&&this.onHover()},t}(),P=function(){function t(t){this.renderer=new s(t),this.renderer.setSize(window.innerWidth,window.innerHeight),this.cursor=new O,this.cursor.onTouchStart=this.onTouchStart.bind(this),this.cursor.onTouchMove=this.onTouchMove.bind(this),this.cursor.onTouchEnd=this.onTouchEnd.bind(this),this.cursor.onHover=this.onHover.bind(this),this.cursor.onWheel=this.onWheel.bind(this),this.timeMem=Date.now(),this.gProps={renderer:this.renderer,cursor:this.cursor,resizeArgs:null},window.addEventListener("orientationchange",this.onOrientationDevice.bind(this)),window.addEventListener("resize",this.onWindowResize.bind(this)),this.onWindowResize(),this.tick()}return t.prototype.tick=function(){var t=Date.now(),e=(t-this.timeMem)/1e3;this.timeMem=t,this.cursor.update(),this.currentScene&&this.currentScene.tick(e),requestAnimationFrame(this.tick.bind(this))},t.prototype.bindScene=function(t){this.currentScene=t,this.currentScene.onBind(this.gProps),this.onWindowResize()},t.prototype.onWindowResize=function(){var t=new o(window.innerWidth,window.innerHeight);this.renderer.setSize(t.x,t.y);var e={aspectRatio:t.x/t.y,windowSize:t.clone(),rendererSize:this.renderer.getSize()};this.gProps.resizeArgs=e,this.currentScene&&this.currentScene.onResize(e)},t.prototype.onOrientationDevice=function(){this.onWindowResize()},t.prototype.onTouchStart=function(t){this.currentScene&&this.currentScene.onTouchStart(this.cursor,t)},t.prototype.onTouchMove=function(t){this.currentScene&&this.currentScene.onTouchMove(this.cursor,t)},t.prototype.onTouchEnd=function(t){this.currentScene&&this.currentScene.onTouchEnd(this.cursor,t)},t.prototype.onHover=function(){this.currentScene&&this.currentScene.onHover(this.cursor)},t.prototype.onWheel=function(t){this.currentScene&&this.currentScene.onWheel(t)},t}(),F=function(){function t(){this.time=0,this.name="",this.scene=new R,this.camera=new d(50,.1,1e3,window.innerWidth/window.innerHeight)}return t.prototype.tick=function(t){this.time+=t,this.animate(t)},t.prototype.animate=function(t){},t.prototype.onBind=function(t){this.gProps=t,this.renderer=t.renderer,this.gl=this.renderer.gl},t.prototype.onResize=function(t){this.camera.aspect=t.aspectRatio},t.prototype.onTouchStart=function(t,e){},t.prototype.onTouchMove=function(t,e){},t.prototype.onTouchEnd=function(t,e){},t.prototype.onHover=function(t){},t.prototype.onWheel=function(t){},t}();i.d(e,"Renderer",(function(){return s})),i.d(e,"FrameBuffer",(function(){return a})),i.d(e,"Material",(function(){return u})),i.d(e,"Camera",(function(){return d})),i.d(e,"Geometry",(function(){return g})),i.d(e,"CubeGeometry",(function(){return v})),i.d(e,"CylinderGeometry",(function(){return x})),i.d(e,"PlaneGeometry",(function(){return _})),i.d(e,"SphereGeometry",(function(){return w})),i.d(e,"Scene",(function(){return R})),i.d(e,"Empty",(function(){return p})),i.d(e,"PowerObj",(function(){return A})),i.d(e,"Vec2",(function(){return o})),i.d(e,"Vec3",(function(){return c})),i.d(e,"Mat4",(function(){return l})),i.d(e,"Texture",(function(){return h})),i.d(e,"GLTFLoader",(function(){return S})),i.d(e,"Controller",(function(){return P})),i.d(e,"Cursor",(function(){return O})),i.d(e,"BaseScene",(function(){return F}))}]);